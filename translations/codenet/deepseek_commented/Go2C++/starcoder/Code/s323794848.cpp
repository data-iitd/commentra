#include <bits/stdc++.h>

using namespace std;

// Deque structure to simulate a double-ended queue
struct deque {
	vector<char> front, back;
	deque() {}
	deque(const deque &d) {
		front = d.front;
		back = d.back;
	}
	deque &operator=(const deque &d) {
		front = d.front;
		back = d.back;
		return *this;
	}
	// Check if the front of the deque is empty
	bool isEmptyFront() {
		return front.empty();
	}
	// Check if the back of the deque is empty
	bool isEmptyBack() {
		return back.empty();
	}
	// Push a byte to the back of the deque
	void pushBack(char v) {
		back.push_back(v);
	}
	// Push a byte to the front of the deque
	void pushFront(char v) {
		front.push_back(v);
	}
	// Pop a byte from the back of the deque
	bool popBack(char &v) {
		if (!back.empty()) {
			v = back.back();
			back.pop_back();
			return true;
		} else if (!front.empty()) {
			v = front.back();
			front.pop_back();
			return true;
		} else {
			return false;
		}
	}
	// Pop a byte from the front of the deque
	bool popFront(char &v) {
		if (!front.empty()) {
			v = front.back();
			front.pop_back();
			return true;
		} else if (!back.empty()) {
			v = back.back();
			back.pop_back();
			return true;
		} else {
			return false;
		}
	}
	// Get the byte at a specific index in the deque
	char get(int idx) {
		int tot = front.size() + back.size();
		char v = 0;
		if (idx < tot) {
			if (idx < front.size()) {
				v = front[front.size() - 1 - idx];
			} else {
				v = back[idx - front.size()];
			}
		}
		return v;
	}
};

// Operation struct to store each operation's details
struct op {
	bool rev, front;
	char c;
	op() {}
	op(bool r, bool f, char c) {
		rev = r;
		front = f;
		this->c = c;
	}
};

// Reverse a string
string rev(string s) {
	string r;
	for (int i = s.size() - 1; i >= 0; i--) {
		r += s[i];
	}
	return r;
}

int main() {
	string S;
	cin >> S;
	int Q;
	cin >> Q;
	deque deq;
	deque deq2;
	deque deq3;
	deque deq4;
	deque deq5;
	deque deq6;
	deque deq7;
	deque deq8;
	deque deq9;
	deque deq10;
	deque deq11;
	deque deq12;
	deque deq13;
	deque deq14;
	deque deq15;
	deque deq16;
	deque deq17;
	deque deq18;
	deque deq19;
	deque deq20;
	deque deq21;
	deque deq22;
	deque deq23;
	deque deq24;
	deque deq25;
	deque deq26;
	deque deq27;
	deque deq28;
	deque deq29;
	deque deq30;
	deque deq31;
	deque deq32;
	deque deq33;
	deque deq34;
	deque deq35;
	deque deq36;
	deque deq37;
	deque deq38;
	deque deq39;
	deque deq40;
	deque deq41;
	deque deq42;
	deque deq43;
	deque deq44;
	deque deq45;
	deque deq46;
	deque deq47;
	deque deq48;
	deque deq49;
	deque deq50;
	deque deq51;
	deque deq52;
	deque deq53;
	deque deq54;
	deque deq55;
	deque deq56;
	deque deq57;
	deque deq58;
	deque deq59;
	deque deq60;
	deque deq61;
	deque deq62;
	deque deq63;
	deque deq64;
	deque deq65;
	deque deq66;
	deque deq67;
	deque deq68;
	deque deq69;
	deque deq70;
	deque deq71;
	deque deq72;
	deque deq73;
	deque deq74;
	deque deq75;
	deque deq76;
	deque deq77;
	deque deq78;
	deque deq79;
	deque deq80;
	deque deq81;
	deque deq82;
	deque deq83;
	deque deq84;
	deque deq85;
	deque deq86;
	deque deq87;
	deque deq88;
	deque deq89;
	deque deq90;
	deque deq91;
	deque deq92;
	deque deq93;
	deque deq94;
	deque deq95;
	deque deq96;
	deque deq97;
	deque deq98;
	deque deq99;
	deque deq100;
	deque deq101;
	deque deq102;
	deque deq103;
	deque deq104;
	deque deq105;
	deque deq106;
	deque deq107;
	deque deq108;
	deque deq109;
	deque deq110;
	deque deq111;
	deque deq112;
	deque deq113;
	deque deq114;
	deque deq115;
	deque deq116;
	deque deq117;
	deque deq118;
	deque deq119;
	deque deq120;
	deque deq121;
	deque deq122;
	deque deq123;
	deque deq124;
	deque deq125;
	deque deq126;
	deque deq127;
	deque deq128;
	deque deq129;
	deque deq130;
	deque deq131;
	deque deq132;
	deque deq133;
	deque deq134;
	deque deq135;
	deque deq136;
	deque deq137;
	deque deq138;
	deque deq139;
	deque deq140;
	deque deq141;
	deque deq142;
	deque deq143;
	deque deq144;
	deque deq145;
	deque deq146;
	deque deq147;
	deque deq148;
	deque deq149;
	deque deq150;
	deque deq151;
	deque deq152;
	deque deq153;
	deque deq154;
	deque deq155;
	deque deq156;
	deque deq157;
	deque deq158;
	deque deq159;
	deque deq160;
	deque deq161;
	deque deq162;
	deque deq163;
	deque deq164;
	deque deq165;
	deque deq166;
	deque deq167;
	deque deq168;
	deque deq169;
	deque deq170;
	deque deq171;
	deque deq172;
	deque deq173;
	deque deq174;
	deque deq175;
	deque deq176;
	deque deq177;
	deque deq178;
	deque deq179;
	deque deq180;
	deque deq181;
	deque deq182;
	deque deq183;
	deque deq184;
	deque deq185;
	deque deq186;
	deque deq187;
	deque deq188;
	deque deq189;
	deque deq190;
	deque deq191;
	deque deq192;
	deque deq193;
	deque deq194;
	deque deq195;
	deque deq196;
	deque deq197;
	deque deq198;
	deque deq199;
	deque deq200;
	deque deq201;
	deque deq202;
	deque deq203;
	deque deq204;
	deque deq205;
	deque deq206;
	deque deq207;
	deque deq208;
	deque deq209;
	deque deq210;
	deque deq211;
	deque deq212;
	deque deq213;
	deque deq214;
	deque deq215;
	deque deq216;
	deque deq217;
	deque deq218;
	deque deq219;
	deque deq220;
	deque deq221;
	deque deq222;
	deque deq223;
	deque deq224;
	deque deq225;
	deque deq226;
	deque deq227;
	deque deq228;
	deque deq229;
	deque deq230;
	deque deq231;
	deque deq232;
	deque deq233;
	deque deq234;
	deque deq235;
	deque deq236;
	deque deq237;
	deque deq238;
	deque deq239;
	deque deq240;
	deque deq241;
	deque deq242;
	deque deq243;
	deque deq244;
	deque deq245;
	deque deq246;
	deque deq247;
	deque deq248;
	deque deq249;
	deque deq250;
	deque deq251;
	deque deq252;
	deque deq253;
	deque deq254;
	deque deq255;
	deque deq256;
	deque deq257;
	deque deq258;
	deque deq259;
	deque deq260;
	deque deq261;
	deque deq262;
	deque deq263;
	deque deq264;
	deque deq265;
	deque deq266;
	deque deq267;
	deque deq268;
	deque deq269;
	deque deq270;
	deque deq271;
	deque deq272;
	deque deq273;
	deque deq274;
	deque deq275;
	deque deq276;
	deque deq277;
	deque deq278;
	deque deq279;
	deque deq280;
	deque deq281;
	deque deq282;
	deque deq283;
	deque deq284;
	deque deq285;
	deque deq286;
	deque deq287;
	deque deq288;
	deque deq289;
	deque deq290;
	deque deq291;
	deque deq292;
	deque deq293;
	deque deq294;
	deque deq295;
	deque deq296;
	deque deq297;
	deque deq298;
	deque deq299;
	deque deq300;
	deque deq301;
	deque deq302;
	deque deq303;
	deque deq304;
	deque deq305;
	deque deq306;
	deque deq307;
	deque deq308;
	deque deq309;
	deque deq310;
	deque deq311;
	deque deq312;
	deque deq313;
	deque deq314;
	deque deq315;
	deque deq316;
	deque deq317;
	deque deq318;
	deque deq319;
	deque deq320;
	deque deq321;
	deque deq322;
	deque deq323;
	deque deq324;
	deque deq325;
	deque deq326;
	deque deq327;
	deque deq328;
	deque deq329;
	deque deq330;
	deque deq331;
	deque deq332;
	deque deq333;
	deque deq334;
	deque deq335;
	deque deq336;
	deque deq337;
	deque deq338;
	deque deq339;
	deque deq340;
	deque deq341;
	deque deq342;
	deque deq343;
	deque deq344;
	deque deq345;
	deque deq346;
	deque deq347;
	deque deq348;
	deque deq349;
	deque deq350;
	deque deq351;
	deque deq352;
	deque deq353;
	deque deq354;
	deque deq355;
	deque deq356;
	deque deq357;
	deque deq358;
	deque deq359;
	deque deq360;
	deque deq361;
	deque deq362;
	deque deq363;
	deque deq364;
	deque deq365;
	deque deq366;
	deque deq367;
	deque deq368;
	deque deq369;
	deque deq370;
	deque deq371;
	deque deq372;
	deque deq373;
	deque deq374;
	deque deq375;
	deque deq376;
	deque deq377;
	deque deq378;
	deque deq379;
	deque deq380;
	deque deq381;
	deque deq382;
	deque deq383;
	deque deq384;
	deque deq385;
	deque deq386;
	deque deq387;
	deque deq388;
	deque deq389;
	deque deq390;
	deque deq391;
	deque deq392;
	deque deq393;
	deque deq394;
	deque deq395;
	deque deq396;
	deque deq397;
	deque deq398;
	deque deq399;
	deque deq400;
	deque deq401;
	deque deq402;
	deque deq403;
	deque deq404;
	deque deq405;
	deque deq406;
	deque deq407;
	deque deq408;
	deque deq409;
	deque deq410;
	deque deq411;
	deque deq412;
	deque deq413;
	deque deq414;
	deque deq415;
	deque deq416;
	deque deq417;
	deque deq418;
	deque deq419;
	deque deq420;
	deque deq421;
	deque deq422;
	deque deq423;
	deque deq424;
	deque deq425;
	deque deq426;
	deque deq427;
	deque deq428;
	deque deq429;
	deque deq430;
	deque deq431;
	deque deq432;
	deque deq433;
	deque deq434;
	deque deq435;
	deque deq436;
	deque deq437;
	deque deq438;
	deque deq439;
	deque deq440;
	deque deq441;
	deque deq442;
	deque deq443;
	deque deq444;
	deque deq445;
	deque deq446;
	deque deq447;
	deque deq448;
	deque deq449;
	deque deq450;
	deque deq451;
	deque deq452;
	deque deq453;
	deque deq454;
	deque deq455;
	deque deq456;
	deque deq457;
	deque deq458;
	deque deq459;
	deque deq460;
	deque deq461;
	deque deq462;
	deque deq463;
	deque deq464;
	deque deq465;
	deque deq466;
	deque deq467;
	deque deq468;
	deque deq469;
	deque deq470;
	deque deq471;
	deque deq472;
	deque deq473;
	deque deq474;
	deque deq475;
	deque deq476;
	deque deq477;
	deque deq478;
	deque deq479;
	deque deq480;
	deque deq481;
	deque deq482;
	deque deq483;
	deque deq484;
	deque deq485;
	deque deq486;
	deque deq487;
	deque deq488;
	deque deq489;
	deque deq490;
	deque deq491;
	deque deq492;
	deque deq493;
	deque deq494;
	deque deq495;
	deque deq496;
	deque deq497;
	deque deq498;
	deque deq499;
	deque deq500;
	deque deq501;
	deque deq502;
	deque deq503;
	deque deq504;
	deque deq505;
	deque deq506;
	deque deq507;
	deque deq508;
	deque deq509;
	deque deq510;
	deque deq511;
	deque deq512;
	deque deq513;
	deque deq514;
	deque deq515;
	deque deq516;
	deque deq517;
	deque deq518;
	deque deq519;
	deque deq520;
	deque deq521;
	deque deq522;
	deque deq523;
	deque deq524;
	deque deq525;
	deque deq526;
	deque deq527;
	deque deq528;
	deque deq529;
	deque deq530;
	deque deq531;
	deque deq532;
	deque deq533;
	deque deq534;
	deque deq535;
	deque deq536;
	deque deq537;
	deque deq538;
	deque deq539;
	deque deq540;
	deque deq541;
	deque deq542;
	deque deq543;
	deque deq544;
	deque deq545;
	deque deq546;
	deque deq547;
	deque deq548;
	deque deq549;
	deque d