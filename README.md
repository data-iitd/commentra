Contains all the arterfacts associated with the submission titled "Revisiting the Role of Natural Language Code 
Comments in Code Translation" at ICSE 2026. 



### Requirements
Execute the following to install all requirements:
```
pip3 install -r requirements.txt
```

### Dataset

The dataset used in this study is available on [HuggingFace](https://huggingface.co/iidai). 

### Comment Generation

The first step is to generate comments in code files. A sample command is provided below:
```
!python3 /path/comment_generation.py --model=gpt-4o-mini --dataset=avatar --source_lang=Python --generated_comments=sixty_percent --intent=how-it-is-done --temperature=0.0 --n_samples=2 --batch_size=10 --max_length=8000 --ngpus=2
```
#### Translation

The first step is to use the model for generating raw translations. A sample translation command is provided below:

```
python3 /path/translate.py --model=granite-20b-code-instruct --dataset=avatar --source_lang=Python --target_lang=Java --prompt_type=vanilla --temperature=0.2 --n_samples=10 --batch_size=10 --max_length=4090 --ngpus=2
```

#### Cleaning

The raw translations generated by LLMs contain extra template-related tokens and natural language. A sample cleaning command is provided below:

```
python3 /path/clean_generations.py --source_lang Python --target_lang Java --model codellama-13b-instruct-hf --approach vanilla --dataset codenet
```

#### Evaluation

The final step is to evaluate the correctness of cleaned translations. A sample evaluation command is given below:

```
python3 /path/compile_avatar.py --source_lang Python --target_lang Java --model granite-20bb-code-instruct --approach vanilla
```

